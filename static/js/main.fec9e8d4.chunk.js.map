{"version":3,"sources":["config.js","services/api-request.js","services/version.service.js","services/cookie.service.js","use-global.js","components/auth/auth-route.jsx","components/version-holder.js","components/common/input.jsx","components/auth/login.jsx","services/auth.service.js","components/auth/register.jsx","components/auth/status.jsx","components/auth/anon-route.jsx","components/room/room-list.jsx","services/room.service.js","serviceWorker.js","index.js","App.js"],"names":["apiUrl","apiRequest","endpoint","a","async","rest","fetch","response","ok","json","data","console","warn","Promise","reject","$apiVersion","then","version","CookieService","key","value","expireDays","expirationDate","Date","now","msDay","document","cookie","toUTCString","split","map","val","find","ckey","pastDate","forEach","delete","initialState","isOnline","AuthToken","get","isAuthenticated","user","counter","actions","setOnline","store","status","setState","addToCounter","state","setUserData","Id","Name","set","clearUserData","useGlobal","globalHook","React","AuthRoute","children","render","location","to","pathname","from","VersionHolder","props","log","catch","err","hasError","finally","isLoading","this","className","JSON","stringify","Component","Input","isFocused","label","helperText","icon","errorText","onChange","isEmpty","length","cx","type","event","target","onFocus","onBlur","title","Login","useState","username","setUsername","password","setPassword","errorMessage","setErrorMessage","history","useHistory","useLocation","onClick","headers","method","body","logIn","replace","error","message","Register","register","Status","useEffect","authToken","gameRoomId","lastActivityTime","id","name","getStatus","style","color","AnonRoute","RoomList","rooms","setRooms","room","IsInGame","UserCount","Boolean","window","hostname","match","ReactDOM","path","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fec9e8d4.chunk.js","sourcesContent":["export const apiUrl = \"https://pg-api.azurewebsites.net/api\";\nexport const wsUrl = \"ws://pg-api.azurewebsites.net/api\";\n","import { apiUrl } from \"../config\";\n\nexport async function apiRequest(endpoint, ...rest) {\n  try {\n    const response = await fetch(`${apiUrl}/${endpoint}`, ...rest);\n\n    if (!response.ok) {\n      throw await response.json();\n    }\n\n    const json = await response.json();\n    return json.data;\n  } catch (error) {\n    console.warn(\"api error\", error);\n\n    return Promise.reject(error);\n  }\n}\n","import { apiRequest } from \"./api-request\";\n\n//helper\n//const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));\n\n//api method\nexport async function getVersion() {\n  //await sleep(3000);\n  return apiRequest(\"version\").then(data => data.version);\n}\n\n//singletone?\nexport const $apiVersion = getVersion();\n","export default class CookieService {\n  static msDay = 24 * 60 * 60 * 1000;\n\n  static set(key, value, expireDays = 1) {\n    const expirationDate = new Date(\n      Date.now() + expireDays * CookieService.msDay\n    );\n\n    document.cookie = `${key}=${value};expires=${expirationDate.toUTCString()};path=/`;\n  }\n\n  static get(key) {\n    const cookies = document.cookie.split(\";\").map(val => val.split(\"=\"));\n\n    const [, value] = cookies.find(([ckey, value]) => ckey === key) || [, null];\n\n    return value;\n  }\n\n  static delete(key) {\n    const pastDate = new Date(0);\n    document.cookie = `${key}=;expires=${pastDate.toUTCString()};path=/`;\n  }\n\n  static clear() {\n    const cookies = document.cookie.split(\";\").map(val => val.split(\"=\"));\n\n    cookies.forEach(([key]) => CookieService.delete(key));\n  }\n}\n","import React from \"react\";\nimport globalHook from \"use-global-hook\";\n\nimport CookieService from \"./services/cookie.service\";\n\nconst initialState = {\n  isOnline: false,\n  //todo: get token from cookie?\n  AuthToken: CookieService.get(\"authToken\"),\n  isAuthenticated: false,\n  user: null,\n  counter: 0\n};\n\nconst actions = {\n  //online\n  setOnline(store, status = true) {\n    store.setState({ isOnline: status });\n  },\n  //debug\n  addToCounter(store, value) {\n    store.setState({\n      counter: store.state.counter + 1\n    });\n  },\n  //user-data\n  setUserData(store, { AuthToken, Id, Name }) {\n    store.setState({\n      AuthToken,\n      user: { Id, Name },\n      isAuthenticated: true\n    });\n    CookieService.set(\"authToken\", AuthToken);\n  },\n  clearUserData(store) {\n    store.setState({\n      AuthToken: null,\n      user: null,\n      isAuthenticated: false\n    });\n    CookieService.delete(\"authToken\");\n  }\n  //\n};\n\nexport const useGlobal = globalHook(React, initialState, actions);\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nimport { useGlobal } from \"../../use-global\";\n\nexport function AuthRoute({ children, ...rest }) {\n  const [{ isAuthenticated }] = useGlobal();\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        isAuthenticated ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n","import React from \"react\";\nimport { $apiVersion } from \"../services/version.service\";\n\nimport \"./version-holder.css\";\n\nexport default class VersionHolder extends React.Component {\n  constructor(props) {\n    super(props);\n\n    $apiVersion\n      .then(version => {\n        console.log(version);\n        this.setState({ version });\n      })\n      .catch(err => {\n        console.log(\"err\", err);\n        this.setState({ hasError: err });\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n\n    this.state = {\n      isLoading: true,\n      hasError: null,\n      version: null\n    };\n  }\n\n  render() {\n    const { version, hasError, isLoading } = this.state;\n\n    return (\n      <div className=\"version-holder\">\n        {isLoading && <span>loading...</span>}\n        {!isLoading && version && <span>api ver: {version}</span>}\n\n        {hasError ? <span>Has error: {JSON.stringify(hasError)}</span> : null}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport cx from \"classnames\";\n\nimport \"./input.css\";\n\nexport default class Input extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isFocused: false\n    };\n  }\n\n  render() {\n    const { label, value, helperText, icon, errorText, onChange } = this.props;\n    const { isFocused } = this.state;\n    const isEmpty = value.length === 0;\n    const hasError = !!errorText;\n\n    return (\n      <label\n        className={cx(\"input cursor-pointer\", {\n          \"is-focused\": isFocused,\n          \"is-empty\": isEmpty,\n          \"has-error\": hasError\n        })}\n      >\n        <div className=\"input-body flex-row justify-between\">\n          <div className=\"flex-column justify-center position-relative w-100 px-2\">\n            <div className=\"input-label\">{label}</div>\n\n            <input\n              className=\"input-value w-100\"\n              type=\"text\"\n              value={value}\n              onChange={event => onChange(event.target.value)}\n              onFocus={() => this.setState({ isFocused: true })}\n              onBlur={() => this.setState({ isFocused: false })}\n            />\n          </div>\n          {icon && !hasError && (\n            <i className=\"input-icon material-icons flex-row align-center mx-2\">\n              {icon}\n            </i>\n          )}\n          {hasError && (\n            <i className=\"error-icon material-icons flex-row align-center mx-2\">\n              error\n            </i>\n          )}\n        </div>\n        <hr className=\"m-0\" />\n        <div className=\"input-footer flex-row ml-2\">\n          {helperText && !hasError && (\n            <span className=\"helper-text text-ellipsis\" title={helperText}>\n              {helperText}\n            </span>\n          )}\n          {hasError && (\n            <span className=\"error-text text-ellipsis\" title={errorText}>\n              {errorText}\n            </span>\n          )}\n        </div>\n      </label>\n    );\n  }\n}\n","import React, { useState } from \"react\";\nimport { useHistory, useLocation, Link } from \"react-router-dom\";\n\nimport Input from \"../common/input\";\nimport { logIn } from \"../../services/auth.service\";\nimport { useGlobal } from \"../../use-global\";\n\nexport default function Login() {\n  const [{}, { setUserData }] = useGlobal();\n  const [username, setUsername] = useState(\"kekster2000\");\n  const [password, setPassword] = useState(\"qwerty123\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const history = useHistory();\n  const location = useLocation();\n\n  const { from } = location.state || { from: { pathname: \"/\" } };\n\n  const onLogIn = () => {\n    logIn({ username, password })\n      .then(data => {\n        setUserData(data);\n        console.log(\"login ok\", data);\n        history.replace(from);\n      })\n      .catch(error => {\n        console.warn(\"login failed\", error);\n        setErrorMessage(error.message);\n      });\n  };\n\n  return (\n    <div className=\"form flex-column\">\n      <Input\n        label=\"username\"\n        value={username}\n        helperText=\"username should be strong enough\"\n        errorText={errorMessage}\n        icon=\"face\"\n        onChange={value => setUsername(value)}\n      />\n      <Input\n        label=\"password\"\n        value={password}\n        helperText=\"keep password simple\"\n        icon=\"lock\"\n        onChange={value => setPassword(value)}\n      />\n\n      <button\n        className=\"button flex-row align-center justify-center\"\n        onClick={onLogIn}\n      >\n        <span>log in</span>\n        <i className=\"material-icons\">arrow_forward</i>\n      </button>\n      <span className=\"p-2 flex-row justify-between\">\n        Don't have an account?\n        <Link to=\"/register\">register</Link>\n      </span>\n    </div>\n  );\n}\n","import { apiRequest } from \"./api-request\";\n\nexport function logIn({ username, password }) {\n  return apiRequest(\"auth/login\", {\n    // todo(vmyshko): make common\n    headers: {\n      \"Content-type\": \"application/json\"\n    },\n    method: \"POST\",\n    body: JSON.stringify({ username, password })\n  });\n}\n\nexport function register({ username, password }) {\n  return apiRequest(\"auth/register\", {\n    // todo(vmyshko): make common\n    headers: {\n      \"Content-type\": \"application/json\"\n    },\n    method: \"POST\",\n    body: JSON.stringify({ username, password })\n  });\n}\n\nexport function getStatus(AuthToken) {\n  return (\n    apiRequest(\"auth/status\", {\n      // todo(vmyshko): make common\n      headers: {\n        \"Content-type\": \"application/json\",\n        authToken: AuthToken\n      },\n      method: \"POST\",\n      body: JSON.stringify({\n        gameRoomId: true,\n        lastActivityTime: true,\n        isOnline: true,\n        authToken: true,\n        id: true,\n        name: true\n      })\n    })\n      // todo(vmyshko): izya to fix this data.data\n      .then(data => data.data)\n  );\n}\n","import React, { useState } from \"react\";\nimport { useHistory, useLocation, Link } from \"react-router-dom\";\n\nimport Input from \"../common/input\";\nimport { register } from \"../../services/auth.service\";\nimport { useGlobal } from \"../../use-global\";\n\nexport default function Register() {\n  const [{}, { setUserData }] = useGlobal();\n  const [username, setUsername] = useState(\"jailbot007\");\n  const [password, setPassword] = useState(\"kek123\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const history = useHistory();\n  const location = useLocation();\n\n  const { from } = location.state || { from: { pathname: \"/\" } };\n\n  const onRegister = () => {\n    register({ username, password })\n      .then(data => {\n        setUserData(data);\n        console.log(\"register ok:\", data);\n        history.replace(from);\n      })\n      .catch(error => {\n        console.warn(\"register failed:\", error.message);\n        setErrorMessage(error.message);\n      });\n  };\n\n  return (\n    <div className=\"form flex-column\">\n      <Input\n        label=\"username\"\n        value={username}\n        helperText=\"username should be strong enough\"\n        errorText={errorMessage}\n        icon=\"face\"\n        onChange={value => setUsername(value)}\n      />\n      <Input\n        label=\"password\"\n        value={password}\n        helperText=\"keep password simple\"\n        icon=\"lock\"\n        onChange={value => setPassword(value)}\n      />\n\n      <button\n        className=\"button flex-row align-center justify-center\"\n        onClick={onRegister}\n      >\n        <span>register</span>\n        <i className=\"material-icons\">add_box</i>\n      </button>\n      <span className=\"p-2 flex-row justify-between\">\n        Already have an account?\n        <Link to=\"/login\">log in</Link>\n      </span>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\n\nimport { getStatus } from \"../../services/auth.service\";\n\nimport \"./status.css\";\nimport { useGlobal } from \"../../use-global\";\n\nexport default function Status() {\n  const [\n    { AuthToken, isAuthenticated, user },\n    { setUserData, clearUserData }\n  ] = useGlobal();\n\n  useEffect(() => {\n    AuthToken &&\n      getStatus(AuthToken)\n        .then(setUserData)\n        .catch(clearUserData);\n  }, []);\n\n  return (\n    <div className=\"status flex-column align-end p-1\">\n      {isAuthenticated ? (\n        <div className=\"flex-row align-center\">\n          <span>{user.Name}</span>\n          <span style={{ color: \"black\" }}>{user.Id}</span>\n          <button\n            className=\"button flex-row align-center px-3\"\n            onClick={clearUserData}\n          >\n            <span> log out</span>\n            <i className=\"material-icons\">exit_to_app</i>\n          </button>\n        </div>\n      ) : (\n        <div>unauthorized</div>\n      )}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nimport { useGlobal } from \"../../use-global\";\n\nexport function AnonRoute({ children, ...rest }) {\n  const [{ isAuthenticated }] = useGlobal();\n\n  return (\n    <Route\n      {...rest}\n      render={() => (!isAuthenticated ? children : <Redirect to=\"/\" />)}\n    />\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory, useLocation, Link } from \"react-router-dom\";\n\nimport Input from \"../common/input\";\nimport { logIn } from \"../../services/auth.service\";\nimport { useGlobal } from \"../../use-global\";\nimport { getRoomList } from \"../../services/room.service\";\n\nexport default function RoomList() {\n  const [{ AuthToken }, {}] = useGlobal();\n\n  const [rooms, setRooms] = useState([]);\n\n  const history = useHistory();\n  const location = useLocation();\n\n  const onRoomCreate = () => {\n    console.log(\"not impl\");\n  };\n  const onRoomJoin = () => {};\n\n  useEffect(() => {\n    getRoomList(AuthToken).then(rooms => {\n      setRooms(rooms);\n    });\n  }, []);\n\n  return (\n    <div className=\"form flex-column\">\n      <ul className=\"flex-column p-4\">\n        {rooms.map(room => (\n          <li className=\"flex-row m-2\" key={room.Id}>\n            <span>{room.Name}</span>\n            <span>status:{room.IsInGame}</span>\n            <span>plrs:{room.UserCount}</span>\n          </li>\n        ))}\n      </ul>\n\n      <button\n        className=\"button flex-row align-center justify-center\"\n        onClick={onRoomCreate}\n      >\n        <span>create new room</span>\n        <i className=\"material-icons\">add_box</i>\n      </button>\n    </div>\n  );\n}\n","import { apiRequest } from \"./api-request\";\n\nexport function getRoomList(authToken) {\n  return apiRequest(\"room/list\", {\n    // todo(vmyshko): make common\n    headers: {\n      \"Content-type\": \"application/json\",\n      authToken\n    },\n    method: \"GET\"\n    //body: JSON.stringify({ username, password })\n  });\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React, { useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport cx from \"classnames\";\n\nimport { $apiVersion } from \"./services/version.service\";\nimport { AuthRoute } from \"./components/auth/auth-route\";\nimport VersionHolder from \"./components/version-holder\";\nimport Login from \"./components/auth/login\";\nimport Register from \"./components/auth/register\";\nimport Status from \"./components/auth/status\";\n\nimport \"./App.css\";\nimport { useGlobal } from \"./use-global\";\nimport { AnonRoute } from \"./components/auth/anon-route\";\nimport RoomList from \"./components/room/room-list\";\n\nexport default function App() {\n  const [{ isOnline, isAuthenticated }, { setOnline }] = useGlobal();\n\n  useEffect(() => {\n    $apiVersion.then(data => setOnline(true));\n  }, []);\n\n  return (\n    <Router>\n      <div className={cx(\"app\", { \"is-online\": isOnline })}>\n        <VersionHolder />\n        <Status />\n\n        <Switch>\n          {/* AUTH */}\n          <AnonRoute path=\"/login\">\n            <Login />\n          </AnonRoute>\n          <AnonRoute path=\"/register\">\n            <Register />\n          </AnonRoute>\n          {/* ROOMS */}\n          <AuthRoute path=\"/rooms\">\n            <RoomList />\n          </AuthRoute>\n          {/* GAME */}\n          {/* // todo(vmyshko): add intermediate page that would define where to redirect user */}\n          <Route path=\"/\">\n            <Redirect to={isAuthenticated ? \"/rooms\" : \"/login\"} />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n"],"sourceRoot":""}