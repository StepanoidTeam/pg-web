(this["webpackJsonppg-web"]=this["webpackJsonppg-web"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/wires-20.b1c5e4e0.svg"},32:function(e,t,a){e.exports=a.p+"static/media/connection-from.e75d5b32.svg"},33:function(e,t,a){e.exports=a.p+"static/media/connection-to.93da9075.svg"},36:function(e,t,a){e.exports=a(56)},46:function(e,t,a){},47:function(e){e.exports=JSON.parse('{"name":"pg-web","homepage":"https://stepanoidteam.github.io/pg-web","version":"0.1.7","private":true,"scripts":{"start":"PORT=3001 react-scripts start","deploy":"gh-pages -d build -m deployment","predeploy":"npm version patch -f && npm run build","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"dependencies":{"@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.4.0","@testing-library/user-event":"^7.2.1","classnames":"^2.2.6","lodash":"^4.17.15","react":"^16.12.0","react-dom":"^16.12.0","react-router-dom":"^5.1.2","react-scripts":"3.3.0","source-map-explorer":"^2.2.2","use-global-hook":"^0.1.12"},"eslintConfig":{"extends":"react-app","rules":{"no-empty-pattern":"off","react-hooks/exhaustive-deps":"off"}},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"gh-pages":"^2.2.0"}}')},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),c=a.n(o),s=a(5),l=a(1),i=a(3),u=a(10),m=a(15),f=a.n(m),p=a(16),d=a(22),h=a(11),b=a(27),v=a(12),y=a(13),g=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,null,[{key:"set",value:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new Date(Date.now()+n*e.msDay);document.cookie="".concat(t,"=").concat(a,";expires=").concat(r.toUTCString(),";path=/")}},{key:"get",value:function(e){var t=document.cookie.split("; ").map((function(e){return e.split("=")})).find((function(t){var a=Object(l.a)(t,2),n=a[0];a[1];return n===e}))||[null,null];return Object(l.a)(t,2)[1]}},{key:"delete",value:function(e){var t=new Date(0);document.cookie="".concat(e,"=;expires=").concat(t.toUTCString(),";path=/")}},{key:"clear",value:function(){document.cookie.split("; ").map((function(e){return e.split("=")})).forEach((function(t){var a=Object(l.a)(t,1)[0];return e.delete(a)}))}}]),e}();g.msDay=864e5;var E={isOnline:!1,apiVersion:null,authToken:g.get("authToken"),isAuthenticated:!1,user:null,counter:0,rooms:[],game:{GameRoomId:null,playerBoards:[]}};function x(e,t){var a=t.Id;return[e.state.game.playerBoards.find((function(e){return e.Id===a})),function(t){e.setState({game:Object(h.a)({},e.state.game,{playerBoards:[].concat(Object(d.a)(e.state.game.playerBoards.filter((function(e){return e.Id!==a}))),[t])})})}]}var w={setOnline:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.setState({isOnline:t})},setApiVersion:function(e,t){e.setState({apiVersion:t})},addToCounter:function(e,t){e.setState({counter:e.state.counter+1})},setUserData:function(e,t){var a=t.AuthToken,n=t.Id,r=t.Name,o=t.GameRoomId;e.setState({authToken:a,user:{id:n,name:r},isAuthenticated:!0,game:Object(h.a)({},e.state.game,{GameRoomId:o})}),g.set("authToken",a)},clearUserData:function(e){e.setState({authToken:null,user:null,isAuthenticated:!1}),g.delete("authToken")},setRooms:function(e,t){e.setState({rooms:t})},setUserJoin:function(e,t){var a=x(e,{Id:t.Id});(0,Object(l.a)(a,2)[1])(Object(h.a)({},t,{EntityType:"PlayerBoard",Color:0,IsDone:!0,Money:0}))},setUserLeave:function(e,t){var a=t.Id;e.setState({game:Object(h.a)({},e.state.game,{playerBoards:Object(d.a)(e.state.game.playerBoards.filter((function(e){return e.Id!==a})))})})},setPlayerBoards:function(e,t){e.setState({game:Object(h.a)({},e.state.game,{playerBoards:t})})},setPlayerColor:function(e,t){var a=t.Id,n=t.Color,r=x(e,{Id:a}),o=Object(l.a)(r,2),c=o[0],s=o[1];if(!c)return console.warn("".concat(a," not found"));c.Color=n,s(c)},setPlayerIsDone:function(e,t){var a=t.Id,n=t.IsDone,r=x(e,{Id:a}),o=Object(l.a)(r,2),c=o[0],s=o[1];if(!c)return console.warn("".concat(a," not found"));c.IsDone=n,s(c)}},j=Object(b.a)(r.a,E,w);function O(e){var t=e.children,a=Object(p.a)(e,["children"]),n=j(),o=Object(l.a)(n,1)[0].isAuthenticated;return r.a.createElement(u.b,Object.assign({},a,{render:function(e){var a=e.location;return o?t:r.a.createElement(u.a,{to:{pathname:"/login",state:{from:a}}})}}))}var k=a(9),N=a.n(k),C="https://pg-api.azurewebsites.net/api";function T(e){var t,a,n,r,o,c=arguments;return N.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:for(s.prev=0,t=c.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=c[n];return s.next=4,N.a.awrap(fetch.apply(void 0,["".concat(C,"/").concat(e)].concat(a)));case 4:if((r=s.sent).ok){s.next=9;break}return s.next=8,N.a.awrap(r.json());case 8:throw s.sent;case 9:return s.next=11,N.a.awrap(r.json());case 11:return o=s.sent,s.abrupt("return",o.data);case 15:return s.prev=15,s.t0=s.catch(0),console.warn("api error",s.t0),s.abrupt("return",Promise.reject(s.t0));case 19:case"end":return s.stop()}}),null,null,[[0,15]])}a(46);var I=a(47).version;function S(){var e=j(),t=Object(l.a)(e,2),a=t[0].apiVersion,o=t[1].setApiVersion;return Object(n.useEffect)((function(){N.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T("version").then((function(e){return e.version})));case 1:case"end":return e.stop()}})).then((function(e){o(e)}))}),[]),r.a.createElement("div",{className:"version-holder flex-column m-1"},r.a.createElement("span",null,"web: ",I),r.a.createElement("span",null,"api: ",a))}var B=a(34),D=a(30),P=a(35),U=(a(48),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(B.a)(this,Object(D.a)(t).call(this,e))).state={isFocused:!1},a}return Object(P.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.value,o=t.helperText,c=t.icon,s=t.errorText,l=t.onChange,i=this.state.isFocused,u=0===n.length,m=!!s;return r.a.createElement("label",{className:f()("input cursor-pointer",{"is-focused":i,"is-empty":u,"has-error":m})},r.a.createElement("div",{className:"input-body flex-row justify-between"},r.a.createElement("div",{className:"flex-column justify-center position-relative w-100 px-2"},r.a.createElement("div",{className:"input-label"},a),r.a.createElement("input",{className:"input-value w-100",type:"text",value:n,onChange:function(e){return l(e.target.value)},onFocus:function(){return e.setState({isFocused:!0})},onBlur:function(){return e.setState({isFocused:!1})}})),c&&!m&&r.a.createElement("i",{className:"input-icon material-icons flex-row align-center mx-2"},c),m&&r.a.createElement("i",{className:"error-icon material-icons flex-row align-center mx-2"},"error")),r.a.createElement("hr",{className:"m-0"}),r.a.createElement("div",{className:"input-footer flex-row ml-2"},o&&!m&&r.a.createElement("span",{className:"helper-text text-ellipsis",title:o},o),m&&r.a.createElement("span",{className:"error-text text-ellipsis",title:s},s)))}}]),t}(r.a.Component));function A(){var e=j(),t=Object(l.a)(e,2);Object(s.a)(t[0]);var a=t[1].setUserData,o=Object(n.useState)("kekster2000"),c=Object(l.a)(o,2),m=c[0],f=c[1],p=Object(n.useState)("qwerty123"),d=Object(l.a)(p,2),h=d[0],b=d[1],v=Object(n.useState)(null),y=Object(l.a)(v,2),g=y[0],E=y[1],x=Object(u.g)(),w=(Object(u.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement("div",{className:"form flex-column"},r.a.createElement(U,{label:"username",value:m,helperText:"username should be strong enough",errorText:g,icon:"face",onChange:function(e){return f(e)}}),r.a.createElement(U,{label:"password",value:h,helperText:"keep password simple",icon:"lock",onChange:function(e){return b(e)}}),r.a.createElement("button",{className:"button flex-row align-center justify-center",onClick:function(){(function(e){var t=e.username,a=e.password;return T("auth/login",{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify({username:t,password:a})})})({username:m,password:h}).then((function(e){a(e),console.debug("login ok",e),x.replace(w)})).catch((function(e){console.warn("login failed",e),E(e.message)}))}},r.a.createElement("span",null,"log in"),r.a.createElement("i",{className:"material-icons"},"arrow_forward")),r.a.createElement("span",{className:"p-2 flex-row justify-between"},"Don't have an account?",r.a.createElement(i.b,{to:"/register"},"register")))}function R(){var e=j(),t=Object(l.a)(e,2);Object(s.a)(t[0]);var a=t[1].setUserData,o=Object(n.useState)("jailbot007"),c=Object(l.a)(o,2),m=c[0],f=c[1],p=Object(n.useState)("kek123"),d=Object(l.a)(p,2),h=d[0],b=d[1],v=Object(n.useState)(null),y=Object(l.a)(v,2),g=y[0],E=y[1],x=Object(u.g)(),w=(Object(u.h)().state||{from:{pathname:"/"}}).from;return r.a.createElement("div",{className:"form flex-column"},r.a.createElement(U,{label:"username",value:m,helperText:"username should be strong enough",errorText:g,icon:"face",onChange:function(e){return f(e)}}),r.a.createElement(U,{label:"password",value:h,helperText:"keep password simple",icon:"lock",onChange:function(e){return b(e)}}),r.a.createElement("button",{className:"button flex-row align-center justify-center",onClick:function(){(function(e){var t=e.username,a=e.password;return T("auth/register",{headers:{"Content-type":"application/json"},method:"POST",body:JSON.stringify({username:t,password:a})})})({username:m,password:h}).then((function(e){a(e),console.debug("register ok:",e),x.replace(w)})).catch((function(e){console.warn("register failed:",e.message),E(e.message)}))}},r.a.createElement("span",null,"register"),r.a.createElement("i",{className:"material-icons"},"add_box")),r.a.createElement("span",{className:"p-2 flex-row justify-between"},"Already have an account?",r.a.createElement(i.b,{to:"/login"},"log in")))}a(49);function J(){var e=Object(u.g)(),t=j(),a=Object(l.a)(t,2),o=a[0],c=o.authToken,s=o.isAuthenticated,i=o.user,m=a[1],f=m.setUserData,p=m.clearUserData;return Object(n.useEffect)((function(){c&&!s&&function(e){return T("auth/status",{headers:{"Content-type":"application/json",authToken:e},method:"POST",body:JSON.stringify({gameRoomId:!0,lastActivityTime:!0,isOnline:!0,authToken:!0,id:!0,name:!0})}).then((function(e){return e.data}))}(c).then((function(t){f(t),t.GameRoomId&&e.push("rooms/".concat(encodeURIComponent(t.GameRoomId)))})).catch(p)}),[]),r.a.createElement("div",{className:"status flex-column align-end p-1"},s?r.a.createElement("div",{className:"flex-row align-center"},r.a.createElement("div",{className:"flex-row align-center mx-2"},r.a.createElement("i",{className:"material-icons px-1"},"face"),r.a.createElement("span",null,i.name)),r.a.createElement("button",{className:"button flex-row align-center px-3",onClick:p},r.a.createElement("span",null," log out"),r.a.createElement("i",{className:"material-icons"},"exit_to_app"))):r.a.createElement("div",null,"unauthorized"))}function _(e){var t=e.children,a=Object(p.a)(e,["children"]),n=j(),o=Object(l.a)(n,1)[0].isAuthenticated;return r.a.createElement(u.b,Object.assign({},a,{render:function(){return o?r.a.createElement(u.a,{to:"/"}):t}}))}a(50);function G(){var e=Object(u.g)(),t=j(),a=Object(l.a)(t,2),o=a[0],c=o.authToken,s=o.rooms,i=a[1].setRooms,m=function(t){(function(e,t){return T("room/join",{headers:{"Content-type":"application/json",authToken:e},method:"POST",body:JSON.stringify({roomId:t})})})(c,t).then((function(a){e.push("/rooms/".concat(encodeURIComponent(t)))}))};return Object(n.useEffect)((function(){(function(e){return T("room/list",{headers:{"Content-type":"application/json",authToken:e},method:"GET"})})(c).then((function(e){i(e)}))}),[]),r.a.createElement("div",{className:"rooms form flex-column p-2"},r.a.createElement("h1",{className:"mx-2"},"rooms"),r.a.createElement("ul",{className:"room-list list flex-column p-1 m-2"},s.map((function(e){return r.a.createElement("li",{className:"list-item flex-row align-center p-2 m-1",key:e.Id},r.a.createElement("span",{className:"room-name fill-left"},e.Name),r.a.createElement("div",{className:"flex-row align-center"},r.a.createElement("i",{className:"material-icons"},"group"),r.a.createElement("span",{className:"px-1"},e.UserCount),r.a.createElement("button",{className:"button",onClick:function(){return m(e.Id)}},"join")))}))),r.a.createElement("button",{className:"button flex-row align-center justify-center m-2",onClick:function(){e.push("/rooms/new")}},r.a.createElement("span",null,"create new room"),r.a.createElement("i",{className:"material-icons"},"add_box")))}var M=a(18);function L(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return T("game/toggleReady",{headers:{"Content-type":"application/json",authToken:e},method:"POST",body:JSON.stringify({state:t})})}function F(){var e=Object(u.i)()._roomId,t=Object(u.g)(),a=decodeURIComponent(e),o=j(),c=Object(l.a)(o,2),s=c[0],i=s.authToken,m=s.rooms,f=s.game,p=c[1].setPlayerBoards,d=f.playerBoards;Object(n.useEffect)((function(){(function(e){return T("game/status",{headers:{"Content-type":"application/json",authToken:e},method:"GET"})})(i).then((function(e){p(e.PlayerBoards)}))}),[]);var h=m.find((function(e){return e.Id===a}));if(!h)return null;var b=function(e){(function(e,t){return T("game/changeColor",{headers:{"Content-type":"application/json",authToken:e},method:"POST",body:JSON.stringify({userId:t})})})(i,e).then((function(){}))},v=function(e){(function(e,t){return T("room/kick?username=".concat(t),{headers:{"Content-type":"application/json",authToken:e},method:"POST",body:JSON.stringify({username:t})})})(i,e).then((function(){}))},y=Object(M.sortBy)(d,"Id"),g=y.every((function(e){return e.IsDone}));return r.a.createElement("div",{className:"form flex-column p-2"},r.a.createElement("h1",{className:"flex-row mx-2"},r.a.createElement("span",{className:"fill-left"},h.Name),r.a.createElement("div",{className:"flex-row align-center"},r.a.createElement("i",{className:"material-icons"},"group"),r.a.createElement("span",{className:"px-1"},y.length))),r.a.createElement("ul",{className:"player-list list flex-column p-1 m-2"},y.map((function(e){return r.a.createElement("li",{className:"list-item flex-row align-center p-2 m-1",key:e.Id},r.a.createElement("div",{className:"player-name flex-row fill-left align-center"},r.a.createElement("i",{className:"city-icon color-".concat(e.Color," cursor-pointer"),onClick:function(){return b(e.Id)}}),r.a.createElement("span",{className:"px-2"},e.Name)),r.a.createElement("i",{className:"material-icons cursor-pointer mx-2",onClick:function(){return v(e.Name)}},"delete"),r.a.createElement("i",{className:"material-icons cursor-pointer mx-1",style:{color:e.IsDone?"gold":"gray"},onClick:function(){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];L(i,t).then((function(){}))}(e.Id,!e.IsDone)}},e.IsDone?"thumb_up":"thumb_down"))}))),r.a.createElement("div",{className:"flex-row align-center"},r.a.createElement("button",{className:"button mx-1",onClick:function(){(function(e){return T("room/leave",{headers:{"Content-type":"application/json",authToken:e},method:"POST"})})(i).then((function(){t.push("/rooms")}))}},"leave"),r.a.createElement("div",{className:"fill-left"}),r.a.createElement("button",{className:"button mx-1",onClick:function(){}},"add bot"),r.a.createElement("button",{className:"button mx-1",disabled:!g,onClick:function(){}},"start game")))}function V(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(u.g)(),m=j(),f=Object(l.a)(m,2),p=f[0].authToken;Object(s.a)(f[1]),Object(n.useEffect)((function(){(function(e){return T("maps/list",{headers:{"Content-type":"application/json",authToken:e},method:"GET"})})().then((function(e){o(e)}))}),[]);return r.a.createElement("div",{className:"form flex-column p-2"},r.a.createElement("h1",{className:"flex-row mx-2"},r.a.createElement("span",{className:"fill-left"},"select map")),r.a.createElement("ul",{className:"map-list list flex-column p-1 m-2",style:{width:320}},a.map((function(e){return r.a.createElement("li",{className:"list-item flex-row align-center p-2 m-1",key:e},r.a.createElement("span",{className:"fill-left"},e),r.a.createElement("button",{className:"button",onClick:function(){return t=e,void c.push("/maps/".concat(t));var t}},"preview"))}))),r.a.createElement("div",{className:"flex-row align-center"},r.a.createElement(i.b,{to:"/rooms"},r.a.createElement("button",{className:"button mx-1"},"quit")),r.a.createElement("div",{className:"fill-left"}),r.a.createElement("button",{className:"button mx-1",onClick:function(){(function(e,t){return T("room/create",{headers:{"Content-type":"application/json",authToken:e},method:"POST",body:JSON.stringify({})})})(p).then((function(){}))}},"create room")))}function H(){var e=Object(u.j)().path;return r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:e},r.a.createElement(G,null)),r.a.createElement(u.b,{path:"".concat(e,"/new")},r.a.createElement(V,null)),r.a.createElement(u.b,{path:"".concat(e,"/:_roomId")},r.a.createElement(F,null)))}a(52);function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("{")?e:e.substring(e.indexOf("{"))}var z=new(function(){function e(){Object(v.a)(this,e),this.ws=null}return Object(y.a)(e,[{key:"reducer",value:function(e){var t=Object(l.a)(this.globals,2);Object(s.a)(t[0]);var a=t[1],n=a.setPlayerColor,r=a.setPlayerIsDone,o=a.setUserJoin,c=a.setUserLeave;switch(e.BroadcastReason){case"/api/game/changecolor":n(Object(l.a)(e.PlayerBoards,1)[0]);break;case"/api/game/toggleready":r(Object(l.a)(e.PlayerBoards,1)[0]);break;case"/api/room/join":if(!e.Users)return;o(Object(l.a)(e.Users,1)[0]);break;case"/api/room/kick":case"/api/room/leave":if(!e.Users)return;c(Object(l.a)(e.Users,1)[0]);break;default:console.warn("unhandled reason",e.BroadcastReason,e)}}},{key:"connect",value:function(e){var t,a,n,r,o=this;return N.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:this.globals=e,t=Object(l.a)(e,2),a=t[0].authToken,n=t[1].setOnline,"\ud83c\udf10ws:",r=function e(t){var r=JSON.parse(W(t.data)||null);switch(console.debug("\ud83c\udf10ws:",t.type,r),t.type){case"message":o.reducer(r);break;case"open":o.ws.addEventListener("close",e),o.ws.addEventListener("message",e),n(!0),o.send({AuthToken:a,Type:"AUTHSTATUS"});break;case"close":o.ws.removeEventListener("open",e),o.ws.removeEventListener("message",e),n(!1)}},this.ws=new WebSocket("wss://pg-api.azurewebsites.net/api"),this.ws.addEventListener("open",r);case 6:case"end":return c.stop()}}),null,this)}},{key:"send",value:function(e){this.ws.send(JSON.stringify(e))}},{key:"disconnect",value:function(){this.ws.close()}}]),e}());a(53),a(54);function q(e){var t=e.cost;return r.a.createElement("div",{className:"city-slot m-1 text-stroke"},t)}function K(e){var t=e.x,a=e.y,n=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay flex-row justify-center align-center",style:{left:t,top:a}},r.a.createElement("div",{className:"city-card"},r.a.createElement("div",{className:"city-rows flex-column p-1"},r.a.createElement("div",{className:"city-slots flex-row"},[10,15,20].map((function(e){return r.a.createElement(q,{key:e,cost:e})}))),r.a.createElement("div",{className:"position-relative"},r.a.createElement("div",{className:"overlay w-100 h-100 flex-row align-center justify-center"},r.a.createElement("div",{className:"city-name px-1 text-stroke"},n))),r.a.createElement("div",{className:"city-slots flex-row"},[10,15,20].map((function(e){return r.a.createElement(q,{key:e,cost:e})})))))))}var X=a(31),Y=a.n(X),$=a(32),Q=a.n($),Z=a(33),ee=a.n(Z);function te(e,t){return Math.pow(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2),.5)}for(var ae=[],ne=190/3,re=150/2,oe=0;oe<3;oe++)for(var ce=0;ce<2;ce++)ae.push({x:ne*(oe-1),y:re*(ce-.5)});function se(e){var t=function(e,t){var a=ae.map((function(t){return{x:e.x+t.x,y:e.y+t.y}})),n=ae.map((function(e){return{x:t.x+e.x,y:t.y+e.y}})),r=[];a.forEach((function(e){n.forEach((function(t){r.push([e,t,te(e,t)])}))}));var o=Object(M.minBy)(r,(function(e){return Object(l.a)(e,3)[2]})),c=Object(l.a)(o,3);return[c[0],c[1],c[2]]}(e.from,e.to),a=Object(l.a)(t,3),n=a[0],o=a[1],c=a[2],s=180*Math.atan2(o.y-n.y,o.x-n.x)/Math.PI,i=0,u=-10,m=-60,f=-16,p=40,d=30;return r.a.createElement("g",{style:{filter:"url(#filter-shadow)"}},r.a.createElement("rect",{height:"20",width:c,x:n.x,y:n.y,viewBox:"0 0 100 100",viewTarget:"0 0 100 100",transform:"translate(".concat(i," ").concat(u,") rotate(").concat(s," ").concat(n.x-i," ").concat(n.y-u,")"),style:{fill:"url(#wires-pattern)"}}),r.a.createElement("image",{x:n.x,y:n.y,width:p,height:d,xlinkHref:Q.a,transform:"translate(".concat(-m/2.5," ").concat(f,") rotate(").concat(s," ").concat(n.x+m/2.5," ").concat(n.y-f,")")}),r.a.createElement("image",{x:o.x,y:o.y,width:p,height:d,xlinkHref:ee.a,transform:"translate(".concat(m," ").concat(f,") rotate(").concat(s," ").concat(o.x-m," ").concat(o.y-f,")")}),r.a.createElement("circle",{cx:n.x,cy:n.y,r:"15",style:{fill:"greenyellow",opacity:.7}}),r.a.createElement("circle",{cx:o.x,cy:o.y,r:"15",style:{fill:"red",opacity:.7}}))}function le(e){var t=e.CoordX,a=e.CoordY;return Object(h.a)({},e,{x:1.5*t,y:2.5*a})}function ie(){var e=Object(u.i)().mapId,t=j(),a=Object(l.a)(t,2),o=a[0].authToken;Object(s.a)(a[1]);var c=Object(n.useState)(null),i=Object(l.a)(c,2),m=i[0],f=i[1];if(Object(n.useEffect)((function(){(function(e,t){return T("maps/map",{headers:{"Content-type":"application/json",authToken:e},method:"POST",body:JSON.stringify({mapId:t})})})(o,e).then((function(e){console.log("\ud83d\uddfe",e),f(e)}))}),[]),!m)return r.a.createElement("div",null,"map preview here");return r.a.createElement("div",null,r.a.createElement("h1",null,"map"),"cities",r.a.createElement("div",{className:"map-overlay"},r.a.createElement("svg",{style:{position:"absolute",boxShadow:"inset 0 0 0 3px black",top:0,left:0,height:2360,width:2470},version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},r.a.createElement("defs",null,r.a.createElement("pattern",{id:"wires-pattern",height:"100%",width:"100%",viewBox:"0 0 20 20",patternContentUnits:"objectBoundingBox",preserveAspectRatio:"none"},r.a.createElement("image",{width:"20",height:"20",preserveAspectRatio:"xMidYMid slice",xlinkHref:Y.a})),r.a.createElement("filter",{id:"filter-shadow"},r.a.createElement("feDropShadow",{stdDeviation:"0 0",dx:"2",dy:"2",floodColor:"#00000040"}))),m.Connectors.map((function(e){var t=m.Cities.find((function(t){return t.Id===e.City1Key})),a=m.Cities.find((function(t){return t.Id===e.City2Key}));return r.a.createElement(se,{key:e.Id,from:le(t),to:le(a),cost:e.Cost})}))),m.Cities.map((function(e){return r.a.createElement(K,{key:e.Name,x:le(e).x,y:le(e).y,name:e.Name})}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(55);c.a.render(r.a.createElement((function(){var e=j(),t=Object(l.a)(e,2),a=t[0].isOnline;return Object(s.a)(t[1]),Object(n.useEffect)((function(){a||z.connect(e)}),[a]),r.a.createElement(i.a,null,r.a.createElement("div",{className:f()("app",{"is-online":a})},r.a.createElement(S,null),r.a.createElement(J,null),r.a.createElement(u.d,null,r.a.createElement(_,{path:"/login"},r.a.createElement(A,null)),r.a.createElement(_,{path:"/register"},r.a.createElement(R,null)),r.a.createElement(O,{path:"/rooms"},r.a.createElement(H,null)),r.a.createElement(u.b,{path:"/maps/:mapId"},r.a.createElement(ie,null)),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/rooms"})))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.3451d6c3.chunk.js.map